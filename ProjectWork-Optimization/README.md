# Проектная работа по курсу - Оптимизация настроек кластера, структуры БД и запросов, для повышения производительности при работе с большими данными.

## Введение

Современные базы данных играют ключевую роль в обработке и анализе больших объемов информации. Одной из наиболее популярных систем управления базами данных (СУБД) является PostgreSQL, известная своей расширяемостью, мощными возможностями индексирования и поддержкой сложных аналитических запросов. Однако производительность PostgreSQL по умолчанию не всегда является оптимальной и требует дополнительной настройки в зависимости от характеристик сервера и специфики нагрузки.

В данной работе рассматривается процесс оптимизации кластера PostgreSQL и запросов к нему на примере обработки данных из набора "Animes Dataset 2023" с платформы Kaggle. Оптимизация включает в себя настройку параметров PostgreSQL, создание индексов, анализ и улучшение запросов, а также другие мероприятия, направленные на повышение производительности системы.

**Исходные данные загружаются в базу данных из трех CSV-файлов:**
- `anime-transformed-dataset-2023.csv`
- `users-details-transformed-2023.csv`
- `users-scores-transformed-2023.csv`

Анализ эффективности оптимизации проводится с использованием инструмента `EXPLAIN ANALYZE`, позволяющего оценить планы выполнения запросов и время их обработки. Основная цель работы — на практике продемонстрировать, как изменения в настройках кластера и структуры запросов влияют на производительность базы данных.

**Цели и задачи исследования**

Целью данной работы является изучение и практическое применение методов оптимизации PostgreSQL для повышения производительности обработки данных. Для достижения поставленной цели необходимо решить следующие задачи:
1. Развернуть кластер PostgreSQL на виртуальной машине с ОС Manjaro Linux в VirtualBox.
2. Загрузить в базу данных информацию из предоставленных CSV-файлов.
3. Разработать SQL-запросы для анализа данных.
4. Провести первоначальную оценку их производительности с помощью `EXPLAIN ANALYZE`.
5. Оптимизировать конфигурацию кластера PostgreSQL в соответствии с доступными ресурсами виртуальной машины.
6. Создать и настроить индексы для повышения эффективности выполнения запросов.
7. Проанализировать и оптимизировать сами SQL-запросы.
8. Провести повторное тестирование и сравнить результаты до и после оптимизации.

Результаты работы позволят наглядно продемонстрировать влияние различных мер оптимизации на скорость выполнения запросов, а также получить практический опыт настройки и улучшения производительности PostgreSQL.


## Шаг 1 - Подготовка виртуальной машины и кластера постгрес.

  1) Скачиваю образ дистрибутива Linux с Официального сайта
  2) Создаю новую вм со стандартными настройками:
     
     <img src="https://github.com/user-attachments/assets/5e1d6cd0-f5fb-49e8-b9b5-cd742df7c2ea" alt="drawing" width="500"/>
     
     <img src="https://github.com/user-attachments/assets/15b0e3c6-3b76-4924-93be-17608f1566a5" alt="drawing" width="500"/>
     
     <img src="https://github.com/user-attachments/assets/c9523dd1-5490-4c54-a784-4e50908c7899" alt="drawing" width="500"/>

  3) Запускаю ВМ и устанавливаю ОС

     <img src="https://github.com/user-attachments/assets/4219c519-c9b7-4beb-898b-fc67e6145904" alt="drawing" width="500"/>

  4) Устанавливаю Postgres на ВМ: ``sudo pacman -S postgresql``
  5) Инициализирую кластер базы данных: ``sudo -u postgres initdb --locale=en_US.UTF-8 -D /var/lib/postgres/data``
  6) Запускаю PostgreSQL: ``sudo systemctl start postgresql``
  7) Проверяю статус кластера: ``sudo -u postgres pg_ctl status -D /var/lib/postgres/data``

     <img src="https://github.com/user-attachments/assets/4fb9418a-c40f-471f-8b06-e2ca6452e5f2" alt="drawing" width="500"/>

